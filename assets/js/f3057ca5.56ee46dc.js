"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[127],{1220:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"self-hosting/guides/kubernetes-helm","title":"Kubernetes + Helm","description":"This guide will help you deploy Databasement on Kubernetes using Helm.","source":"@site/docs/self-hosting/guides/kubernetes-helm.md","sourceDirName":"self-hosting/guides","slug":"/self-hosting/guides/kubernetes-helm","permalink":"/databasement/self-hosting/guides/kubernetes-helm","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/self-hosting/guides/kubernetes-helm.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"selfHostingSidebar","previous":{"title":"Docker Compose","permalink":"/databasement/self-hosting/guides/docker-compose"}}');var s=a(4848),l=a(8453);const i={sidebar_position:3},r="Kubernetes + Helm",o={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"1. Add the Helm Repository",id:"1-add-the-helm-repository",level:3},{value:"2. Generate an Application Key",id:"2-generate-an-application-key",level:3},{value:"3. Create a Values File",id:"3-create-a-values-file",level:3},{value:"Minimal Configuration (SQLite)",id:"minimal-configuration-sqlite",level:4},{value:"Production Configuration (External Database)",id:"production-configuration-external-database",level:4},{value:"4. Install the Chart",id:"4-install-the-chart",level:3},{value:"5. Verify the Deployment",id:"5-verify-the-deployment",level:3},{value:"Uninstalling",id:"uninstalling",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"kubernetes--helm",children:"Kubernetes + Helm"})}),"\n",(0,s.jsx)(n.p,{children:"This guide will help you deploy Databasement on Kubernetes using Helm."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A Kubernetes cluster"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"Helm"})," v3.x installed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/",children:"kubectl"})," configured for your cluster"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.h3,{id:"1-add-the-helm-repository",children:"1. Add the Helm Repository"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm repo add databasement https://david-crty.github.io/databasement\nhelm repo update\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-generate-an-application-key",children:"2. Generate an Application Key"}),"\n",(0,s.jsx)(n.p,{children:"Before deploying, generate an application encryption key:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run --rm davidcrty/databasement:latest php artisan key:generate --show\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Copy the output (e.g., ",(0,s.jsx)(n.code,{children:"base64:abc123..."}),") for use in your values file."]}),"\n",(0,s.jsx)(n.h3,{id:"3-create-a-values-file",children:"3. Create a Values File"}),"\n",(0,s.jsx)(n.h4,{id:"minimal-configuration-sqlite",children:"Minimal Configuration (SQLite)"}),"\n",(0,s.jsx)(n.p,{children:"For simple deployments using SQLite:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="values.yaml"',children:'app:\n  url: https://backup.yourdomain.com\n  key: "base64:your-generated-key-here"\n\ningress:\n  enabled: true\n  className: nginx\n  host: backup.yourdomain.com\n  tlsSecretName: databasement-tls  # Optional: for HTTPS\n'})}),"\n",(0,s.jsx)(n.h4,{id:"production-configuration-external-database",children:"Production Configuration (External Database)"}),"\n",(0,s.jsx)(n.p,{children:"For production, we recommend using MySQL or PostgreSQL instead of SQLite:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="values.yaml"',children:'app:\n  debug: false\n  url: https://backup.yourdomain.com\n  key: "base64:your-generated-key-here"\n\ndatabase:\n  connection: mysql  # or pgsql\n  host: your-mysql-host.example.com\n  port: 3306\n  name: databasement\n  username: databasement\n  password: your-secure-password\n\ningress:\n  enabled: true\n  className: nginx\n  annotations:\n    cert-manager.io/cluster-issuer: letsencrypt-prod\n  host: backup.yourdomain.com\n  tlsSecretName: databasement-tls\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Explore the full ",(0,s.jsx)(n.a,{href:"https://github.com/david-crty/databasement/blob/main/helm/databasement/values.yaml",children:(0,s.jsx)(n.code,{children:"values.yaml"})})," on GitHub to see all available configuration options."]})}),"\n",(0,s.jsx)(n.h3,{id:"4-install-the-chart",children:"4. Install the Chart"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install databasement databasement/databasement -f values.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-verify-the-deployment",children:"5. Verify the Deployment"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n databasement\nkubectl get svc -n databasement\nkubectl get ingress -n databasement\n"})}),"\n",(0,s.jsx)(n.h2,{id:"uninstalling",children:"Uninstalling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm uninstall databasement -n databasement\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsx)(n.p,{children:"This will not delete the PersistentVolumeClaim by default. To delete all data:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl delete pvc -l app.kubernetes.io/name=databasement -n databasement\n"})})]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>r});var t=a(6540);const s={},l=t.createContext(s);function i(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);