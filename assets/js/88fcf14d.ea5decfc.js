"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[409],{3469:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"self-hosting/configuration","title":"Configuration","description":"This page contains all the environment variables you can use to configure Databasement.","source":"@site/docs/self-hosting/configuration.md","sourceDirName":"self-hosting","slug":"/self-hosting/configuration","permalink":"/databasement/self-hosting/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/self-hosting/configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"selfHostingSidebar","previous":{"title":"Introduction","permalink":"/databasement/self-hosting/intro"},"next":{"title":"Docker","permalink":"/databasement/self-hosting/guides/docker"}}');var a=s(4848),t=s(8453);const r={sidebar_position:2},d="Configuration",l={},o=[{value:"Application Settings",id:"application-settings",level:2},{value:"Generating the Application Key",id:"generating-the-application-key",level:3},{value:"Database Configuration",id:"database-configuration",level:2},{value:"SQLite (Simplest)",id:"sqlite-simplest",level:3},{value:"MySQL / MariaDB",id:"mysql--mariadb",level:3},{value:"PostgreSQL",id:"postgresql",level:3},{value:"Backup Storage",id:"backup-storage",level:2},{value:"S3 Storage (Optional)",id:"s3-storage-optional",level:3},{value:"CLI Tools Configuration",id:"cli-tools-configuration",level:2},{value:"Queue Configuration",id:"queue-configuration",level:2},{value:"Session &amp; Cache",id:"session--cache",level:2},{value:"Logging",id:"logging",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Enable Debug Mode",id:"enable-debug-mode",level:3},{value:"Run Artisan Commands",id:"run-artisan-commands",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,a.jsx)(n.p,{children:"This page contains all the environment variables you can use to configure Databasement."}),"\n",(0,a.jsx)(n.h2,{id:"application-settings",children:"Application Settings"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"APP_DEBUG"})}),(0,a.jsxs)(n.td,{children:["Enable debug mode (set to ",(0,a.jsx)(n.code,{children:"false"})," in production)"]}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"false"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"APP_URL"})}),(0,a.jsx)(n.td,{children:"Full URL where the app is accessible"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"http://localhost:8000"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"APP_KEY"})}),(0,a.jsx)(n.td,{children:"Application encryption key (required)"}),(0,a.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"generating-the-application-key",children:"Generating the Application Key"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"APP_KEY"})," is required for encryption. Generate one with:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run --rm davidcrty/databasement:latest php artisan key:generate --show\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Copy the output (e.g., ",(0,a.jsx)(n.code,{children:"base64:xxxx..."}),") and set it as ",(0,a.jsx)(n.code,{children:"APP_KEY"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,a.jsx)(n.p,{children:"Databasement needs a database to store its own data (users, servers, backup configurations)."}),"\n",(0,a.jsx)(n.h3,{id:"sqlite-simplest",children:"SQLite (Simplest)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"DB_CONNECTION=sqlite\nDB_DATABASE=/data/database.sqlite\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["When using SQLite, make sure to mount a volume for ",(0,a.jsx)(n.code,{children:"/data"})," to persist data."]})}),"\n",(0,a.jsx)(n.h3,{id:"mysql--mariadb",children:"MySQL / MariaDB"}),"\n",(0,a.jsx)(n.p,{children:"Create a database and user for Databasement on your MySQL server:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"MySQL:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE databasement CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'databasement'@'%' IDENTIFIED BY 'your-secure-password';\nGRANT ALL PRIVILEGES ON databasement.* TO 'databasement'@'%';\nFLUSH PRIVILEGES;\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"DB_CONNECTION=mysql\nDB_HOST=your-mysql-host\nDB_PORT=3306\nDB_DATABASE=databasement\nDB_USERNAME=databasement\nDB_PASSWORD=your-secure-password\n"})}),"\n",(0,a.jsx)(n.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,a.jsx)(n.p,{children:"Create a database and user for Databasement on your PostgreSQL server:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"PostgreSQL:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE databasement;\nCREATE USER databasement WITH ENCRYPTED PASSWORD 'your-secure-password';\nGRANT ALL PRIVILEGES ON DATABASE databasement TO databasement;\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"DB_CONNECTION=pgsql\nDB_HOST=your-postgres-host\nDB_PORT=5432\nDB_DATABASE=databasement\nDB_USERNAME=databasement\nDB_PASSWORD=your-secure-password\n"})}),"\n",(0,a.jsx)(n.h2,{id:"backup-storage",children:"Backup Storage"}),"\n",(0,a.jsx)(n.p,{children:"Configure where backup files are stored temporarily during operations."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"BACKUP_LOCAL_ROOT"})}),(0,a.jsx)(n.td,{children:"Local temp directory for backups"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"/tmp/backups"})})]})})]}),"\n",(0,a.jsx)(n.h3,{id:"s3-storage-optional",children:"S3 Storage (Optional)"}),"\n",(0,a.jsx)(n.p,{children:"If you want to use S3-compatible storage for backup volumes:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"AWS_ACCESS_KEY_ID=your-access-key\nAWS_SECRET_ACCESS_KEY=your-secret-key\nAWS_DEFAULT_REGION=us-east-1\nAWS_BUCKET=your-bucket-name\n"})}),"\n",(0,a.jsx)(n.h2,{id:"cli-tools-configuration",children:"CLI Tools Configuration"}),"\n",(0,a.jsx)(n.p,{children:"Databasement uses command-line tools to perform database dumps and restores."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"MYSQL_CLI_TYPE"})}),(0,a.jsxs)(n.td,{children:["MySQL CLI type (",(0,a.jsx)(n.code,{children:"mysql"})," or ",(0,a.jsx)(n.code,{children:"mariadb"}),")"]}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"mariadb"})})]})})]}),"\n",(0,a.jsxs)(n.p,{children:["The container includes both ",(0,a.jsx)(n.code,{children:"mysqldump"}),"/",(0,a.jsx)(n.code,{children:"mysql"})," (via MariaDB client) and ",(0,a.jsx)(n.code,{children:"pg_dump"}),"/",(0,a.jsx)(n.code,{children:"psql"})," for PostgreSQL operations."]}),"\n",(0,a.jsx)(n.h2,{id:"queue-configuration",children:"Queue Configuration"}),"\n",(0,a.jsx)(n.p,{children:"The application uses a queue for async backup and restore operations. By default, it uses the database queue driver."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"QUEUE_CONNECTION"})}),(0,a.jsx)(n.td,{children:"Queue driver"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"database"})})]})})]}),"\n",(0,a.jsx)(n.h2,{id:"session--cache",children:"Session & Cache"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SESSION_DRIVER"})}),(0,a.jsx)(n.td,{children:"Session storage driver"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"database"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"CACHE_STORE"})}),(0,a.jsx)(n.td,{children:"Cache storage driver"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"database"})})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"LOG_CHANNEL"})}),(0,a.jsx)(n.td,{children:"Logging channel"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"stderr"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"LOG_LEVEL"})}),(0,a.jsx)(n.td,{children:"Minimum log level"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"debug"})})]})]})]}),"\n",(0,a.jsxs)(n.p,{children:["For production, ",(0,a.jsx)(n.code,{children:"stderr"})," is recommended as logs will be captured by Docker."]}),"\n",(0,a.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,a.jsxs)(n.p,{children:["Here's a complete ",(0,a.jsx)(n.code,{children:".env"})," file for a production deployment with MySQL:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Application\nAPP_ENV=production\nAPP_DEBUG=false\nAPP_URL=https://backup.yourdomain.com\nAPP_KEY=base64:your-generated-key-here\n\n# Database (for Databasement itself)\nDB_CONNECTION=mysql\nDB_HOST=mysql.yourdomain.com\nDB_PORT=3306\nDB_DATABASE=databasement\nDB_USERNAME=databasement\nDB_PASSWORD=secure-password-here\n\n# Storage & Queue\nQUEUE_CONNECTION=database\nSESSION_DRIVER=database\nCACHE_STORE=database\n\n# Logging\nLOG_CHANNEL=stderr\nLOG_LEVEL=warning\n\n# CLI Tools\nMYSQL_CLI_TYPE=mariadb\n"})}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"enable-debug-mode",children:"Enable Debug Mode"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Enable debug mode with ",(0,a.jsx)(n.code,{children:"APP_DEBUG=true"})," in your values file."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Go to ",(0,a.jsx)(n.code,{children:"https://dabasement.yourdomain.com/health/debug"})," to view the debug page."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Check the logs"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Report any issues on ",(0,a.jsx)(n.a,{href:"https://github.com/david-crty/databasement/issues",children:"GitHub"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"run-artisan-commands",children:"Run Artisan Commands"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:status # Check database migrations\nphp artisan config:show database # View database configuration\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var i=s(6540);const a={},t=i.createContext(a);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);