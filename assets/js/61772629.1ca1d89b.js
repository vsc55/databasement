"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[725],{427:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"self-hosting/docker","title":"Docker","description":"This guide will help you deploy Databasement using Docker. This is the simplest deployment method, using a single container that includes everything you need.","source":"@site/docs/self-hosting/docker.md","sourceDirName":"self-hosting","slug":"/self-hosting/docker","permalink":"/databasement/self-hosting/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/self-hosting/docker.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"selfHostingSidebar","previous":{"title":"Configuration","permalink":"/databasement/self-hosting/configuration"},"next":{"title":"Docker Compose","permalink":"/databasement/self-hosting/docker-compose"}}');var i=s(4848),r=s(8453);const a={sidebar_position:3},o="Docker",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start (SQLite)",id:"quick-start-sqlite",level:2},{value:"Custom User ID (PUID/PGID)",id:"custom-user-id-puidpgid",level:2},{value:"Rootless Containers",id:"rootless-containers",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"docker",children:"Docker"})}),"\n",(0,i.jsx)(n.p,{children:"This guide will help you deploy Databasement using Docker. This is the simplest deployment method, using a single container that includes everything you need."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Docker"})," installed on your system"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start-sqlite",children:"Quick Start (SQLite)"}),"\n",(0,i.jsx)(n.p,{children:"The simplest way to run Databasement with SQLite as the database:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Generate an application key\nAPP_KEY=$(docker run --rm davidcrty/databasement:latest php artisan key:generate --show)\n\n\n# Run the container\ndocker run -d \\\n  --name databasement \\\n  -p 2226:2226 \\\n  -e APP_KEY=$APP_KEY \\\n  -e DB_CONNECTION=sqlite \\\n  -e DB_DATABASE=/data/database.sqlite \\\n  -e ENABLE_QUEUE_WORKER=true \\\n  -v ./databasement-data:/data \\\n  davidcrty/databasement:latest\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ENABLE_QUEUE_WORKER=true"})," environment variable enables the background queue worker inside the container. This is required for processing backup and restore jobs. When using Docker Compose, the worker runs as a separate service instead."]})}),"\n",(0,i.jsxs)(n.p,{children:["Access the application at ",(0,i.jsx)(n.a,{href:"http://localhost:2226",children:"http://localhost:2226"})]}),"\n",(0,i.jsx)(n.h2,{id:"custom-user-id-puidpgid",children:"Custom User ID (PUID/PGID)"}),"\n",(0,i.jsxs)(n.p,{children:["By default, the application runs as PUID/PGID ",(0,i.jsx)(n.code,{children:"1000"}),". You can customize this using the ",(0,i.jsx)(n.code,{children:"PUID"})," and ",(0,i.jsx)(n.code,{children:"PGID"})," environment variables:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run with custom PUID/PGID\ndocker run -d \\\n...\n  -e PUID=1001 \\\n  -e PGID=1001 \\\n...\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Find your user's PUID/PGID with ",(0,i.jsx)(n.code,{children:"id username"}),". The container will automatically set the correct permissions on ",(0,i.jsx)(n.code,{children:"/data"})," for the specified PUID/PGID."]})}),"\n",(0,i.jsx)(n.h3,{id:"rootless-containers",children:"Rootless Containers"}),"\n",(0,i.jsxs)(n.p,{children:["For rootless Docker or Podman environments, use the ",(0,i.jsx)(n.code,{children:"--user"})," flag. When using this method, the container runs entirely as the specified user and skips the automatic permission fix:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create the data directory and set permissions first\nmkdir /path/to/databasement/data\nsudo chown 499:499 /path/to/databasement/data\n\ndocker run -d \\\n...\n  --user 499:499 \\\n...\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["When using ",(0,i.jsx)(n.code,{children:"--user"}),", you must manually set directory permissions before starting the container since the automatic permission fix requires root."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);