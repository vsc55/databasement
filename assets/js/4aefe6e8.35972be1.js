"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[813],{8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const i={},d=r.createContext(i);function t(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(d.Provider,{value:n},e.children)}},9602:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"self-hosting/nas-platforms","title":"NAS Platforms","description":"This guide provides platform-specific instructions for deploying Databasement on popular NAS (Network Attached Storage) and home server systems.","source":"@site/docs/self-hosting/nas-platforms.md","sourceDirName":"self-hosting","slug":"/self-hosting/nas-platforms","permalink":"/databasement/self-hosting/nas-platforms","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/self-hosting/nas-platforms.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"selfHostingSidebar","previous":{"title":"Native Ubuntu Installation","permalink":"/databasement/self-hosting/native-ubuntu"}}');var i=s(4848),d=s(8453);const t={sidebar_position:7},l="NAS Platforms",o={},a=[{value:"Overview",id:"overview",level:2},{value:"Common Configuration",id:"common-configuration",level:2},{value:"Generate APP_KEY",id:"generate-app_key",level:3},{value:"Required Environment Variables",id:"required-environment-variables",level:3},{value:"Default UID/GID by Platform",id:"default-uidgid-by-platform",level:3},{value:"Unraid",id:"unraid",level:2},{value:"Setup",id:"setup",level:3},{value:"Synology DSM",id:"synology-dsm",level:2},{value:"Setup (Container Manager - DSM 7.2+)",id:"setup-container-manager---dsm-72",level:3},{value:"Custom User ID",id:"custom-user-id",level:3},{value:"TrueNAS SCALE",id:"truenas-scale",level:2},{value:"Setup",id:"setup-1",level:3},{value:"Host Path Permissions",id:"host-path-permissions",level:3},{value:"QNAP",id:"qnap",level:2},{value:"Setup (Container Station)",id:"setup-container-station",level:3},{value:"OpenMediaVault",id:"openmediavault",level:2},{value:"Proxmox (LXC)",id:"proxmox-lxc",level:2},{value:"Setup",id:"setup-2",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Permission Denied Errors",id:"permission-denied-errors",level:3},{value:"Verify Container User",id:"verify-container-user",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nas-platforms",children:"NAS Platforms"})}),"\n",(0,i.jsx)(n.p,{children:"This guide provides platform-specific instructions for deploying Databasement on popular NAS (Network Attached Storage) and home server systems."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["NAS platforms typically use bind mounts instead of Docker volumes, which requires matching the container's user ID with the host system's permissions. The Databasement Docker image is ",(0,i.jsx)(n.strong,{children:"rootless"})," and supports running as any user via the ",(0,i.jsx)(n.code,{children:"--user"})," flag."]}),"\n",(0,i.jsx)(n.h2,{id:"common-configuration",children:"Common Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"generate-app_key",children:"Generate APP_KEY"}),"\n",(0,i.jsx)(n.p,{children:"Before deploying, generate an application key:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --rm davidcrty/databasement:latest php artisan key:generate --show\n"})}),"\n",(0,i.jsx)(n.h3,{id:"required-environment-variables",children:"Required Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:"All platforms need these environment variables:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"APP_KEY"})}),(0,i.jsx)(n.td,{children:"Your generated key (from above)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DB_CONNECTION"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sqlite"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DB_DATABASE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/data/database.sqlite"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ENABLE_QUEUE_WORKER"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TZ"})}),(0,i.jsxs)(n.td,{children:["Your timezone (e.g., ",(0,i.jsx)(n.code,{children:"America/New_York"}),")"]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["For MySQL/PostgreSQL configuration, see the ",(0,i.jsx)(n.a,{href:"/databasement/self-hosting/configuration#database-configuration",children:"configuration guide"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"default-uidgid-by-platform",children:"Default UID/GID by Platform"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Platform"}),(0,i.jsxs)(n.th,{children:["Default UID",":GID"]})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Unraid"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"99:100"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Synology"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1000:1000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"TrueNAS SCALE"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"568:568"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"QNAP"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"500:100"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"OpenMediaVault"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1000:100"})})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The Docker image is ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/engine/security/rootless/",children:(0,i.jsx)(n.strong,{children:"rootless"})})," and runs as UID ",(0,i.jsx)(n.code,{children:"1000"})," by default."]})}),"\n",(0,i.jsx)(n.h2,{id:"unraid",children:"Unraid"}),"\n",(0,i.jsxs)(n.p,{children:["Unraid runs containers as ",(0,i.jsx)(n.code,{children:"nobody:users"})," (UID 99, GID 100) by default."]}),"\n",(0,i.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Add a new container with repository: ",(0,i.jsx)(n.code,{children:"davidcrty/databasement:latest"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"--user 99:100"})," to ",(0,i.jsx)(n.strong,{children:"Extra Parameters"})]}),"\n",(0,i.jsxs)(n.li,{children:["Configure port: ",(0,i.jsx)(n.code,{children:"2226"})," \u2192 ",(0,i.jsx)(n.code,{children:"2226"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add path mapping: ",(0,i.jsx)(n.code,{children:"/mnt/user/appdata/databasement"})," \u2192 ",(0,i.jsx)(n.code,{children:"/data"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.a,{href:"#required-environment-variables",children:"environment variables"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"synology-dsm",children:"Synology DSM"}),"\n",(0,i.jsxs)(n.p,{children:["Synology DSM typically uses UID/GID ",(0,i.jsx)(n.code,{children:"1000"})," for the first user, which matches the container's default."]}),"\n",(0,i.jsx)(n.h3,{id:"setup-container-manager---dsm-72",children:"Setup (Container Manager - DSM 7.2+)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.strong,{children:"Container Manager"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Registry"})]}),"\n",(0,i.jsxs)(n.li,{children:["Search for ",(0,i.jsx)(n.code,{children:"davidcrty/databasement"})," and download"]}),"\n",(0,i.jsxs)(n.li,{children:["Create container:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"2226"})," \u2192 ",(0,i.jsx)(n.code,{children:"2226"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Volume"}),": ",(0,i.jsx)(n.code,{children:"/docker/databasement"})," \u2192 ",(0,i.jsx)(n.code,{children:"/data"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment"}),": Add ",(0,i.jsx)(n.a,{href:"#required-environment-variables",children:"required variables"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable auto-restart"}),": Yes"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"custom-user-id",children:"Custom User ID"}),"\n",(0,i.jsxs)(n.p,{children:["If you need a different user, find your UID via SSH (",(0,i.jsx)(n.code,{children:"id your-username"}),"), then add to ",(0,i.jsx)(n.strong,{children:"Advanced Settings"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Execution Command"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"truenas-scale",children:"TrueNAS SCALE"}),"\n",(0,i.jsxs)(n.p,{children:["TrueNAS SCALE uses ",(0,i.jsx)(n.code,{children:"apps"})," user (UID 568) by default for applications."]}),"\n",(0,i.jsx)(n.h3,{id:"setup-1",children:"Setup"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.strong,{children:"Apps"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Discover Apps"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Custom App"})]}),"\n",(0,i.jsxs)(n.li,{children:["Follow the ",(0,i.jsx)(n.a,{href:"/databasement/self-hosting/docker-compose",children:"Docker Compose guide"}),", adding ",(0,i.jsx)(n.code,{children:'user: "568:568"'})," to both ",(0,i.jsx)(n.code,{children:"app"})," and ",(0,i.jsx)(n.code,{children:"worker"})," services (see ",(0,i.jsx)(n.a,{href:"/databasement/self-hosting/docker-compose#custom-user-id",children:"Custom User ID"})," for example)"]}),"\n",(0,i.jsxs)(n.li,{children:["Volume: ",(0,i.jsx)(n.code,{children:"/mnt/pool/apps/databasement"})," \u2192 ",(0,i.jsx)(n.code,{children:"/data"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.a,{href:"#required-environment-variables",children:"environment variables"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"host-path-permissions",children:"Host Path Permissions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo chown -R 568:568 /mnt/pool/apps/databasement\n"})}),"\n",(0,i.jsx)(n.h2,{id:"qnap",children:"QNAP"}),"\n",(0,i.jsx)(n.p,{children:"QNAP Container Station supports Docker containers with custom configurations."}),"\n",(0,i.jsx)(n.h3,{id:"setup-container-station",children:"Setup (Container Station)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.strong,{children:"Container Station"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Create"})]}),"\n",(0,i.jsxs)(n.li,{children:["Search for ",(0,i.jsx)(n.code,{children:"davidcrty/databasement"})]}),"\n",(0,i.jsxs)(n.li,{children:["Configure:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"2226"})," \u2192 ",(0,i.jsx)(n.code,{children:"2226"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Volume"}),": ",(0,i.jsx)(n.code,{children:"/Container/databasement"})," \u2192 ",(0,i.jsx)(n.code,{children:"/data"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment"}),": Add ",(0,i.jsx)(n.a,{href:"#required-environment-variables",children:"required variables"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Advanced"}),": Add ",(0,i.jsx)(n.code,{children:"--user 500:100"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"openmediavault",children:"OpenMediaVault"}),"\n",(0,i.jsxs)(n.p,{children:["OpenMediaVault uses Docker via omv-extras plugin. Follow the ",(0,i.jsx)(n.a,{href:"/databasement/self-hosting/docker-compose",children:"Docker Compose guide"})," with ",(0,i.jsx)(n.code,{children:'user: "1000:100"'})," (adjust with ",(0,i.jsx)(n.code,{children:"id your-username"}),")."]}),"\n",(0,i.jsx)(n.h2,{id:"proxmox-lxc",children:"Proxmox (LXC)"}),"\n",(0,i.jsx)(n.p,{children:"For Proxmox, run Databasement in an LXC container or VM with Docker."}),"\n",(0,i.jsxs)(n.p,{children:["Proxmox delegates UID/GID to the LXC container or VM, so match the UID",":GID"," of the user running Docker inside your container."]}),"\n",(0,i.jsx)(n.h3,{id:"setup-2",children:"Setup"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Create an unprivileged LXC (Debian 12 or Ubuntu 22.04)"}),"\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.code,{children:"nesting=1"})," feature"]}),"\n",(0,i.jsx)(n.li,{children:"Install Docker inside the LXC"}),"\n",(0,i.jsxs)(n.li,{children:["Follow the standard ",(0,i.jsx)(n.a,{href:"/databasement/self-hosting/docker",children:"Docker guide"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"permission-denied-errors",children:"Permission Denied Errors"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Check directory ownership:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls -la /path/to/databasement\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Fix ownership to match your platform's ",(0,i.jsx)(n.a,{href:"#default-uidgid-by-platform",children:"default UID/GID"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo chown -R UID:GID /path/to/databasement\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"verify-container-user",children:"Verify Container User"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker inspect databasement --format '{{.Config.User}}'\n"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);