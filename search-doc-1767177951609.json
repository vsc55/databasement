{"searchDocs":[{"title":"Docker","type":0,"sectionRef":"#","url":"/databasement/self-hosting/docker","content":"","keywords":"","version":"Next"},{"title":"Prerequisites​","type":1,"pageTitle":"Docker","url":"/databasement/self-hosting/docker#prerequisites","content":" Docker installed on your system  ","version":"Next","tagName":"h2"},{"title":"Quick Start (SQLite)​","type":1,"pageTitle":"Docker","url":"/databasement/self-hosting/docker#quick-start-sqlite","content":" The simplest way to run Databasement with SQLite as the database:  # Generate an application key APP_KEY=$(docker run --rm davidcrty/databasement:latest php artisan key:generate --show) docker volume create databasement-data # Run the container docker run -d \\ --name databasement \\ -p 2226:2226 \\ -e APP_KEY=$APP_KEY \\ -e DB_CONNECTION=sqlite \\ -e DB_DATABASE=/data/database.sqlite \\ -e ENABLE_QUEUE_WORKER=true \\ -v databasement-data:/data \\ davidcrty/databasement:latest   note The ENABLE_QUEUE_WORKER=true environment variable enables the background queue worker inside the container. This is required for processing backup and restore jobs. When using Docker Compose, the worker runs as a separate service instead.  Access the application at http://localhost:2226  ","version":"Next","tagName":"h2"},{"title":"Production Setup (External Database)​","type":1,"pageTitle":"Docker","url":"/databasement/self-hosting/docker#production-setup-external-database","content":" For production, we recommend using MySQL or PostgreSQL instead of SQLite. Check the database configuration guide for more information. ","version":"Next","tagName":"h2"},{"title":"Development Guide","type":0,"sectionRef":"#","url":"/databasement/contributing/development","content":"","keywords":"","version":"Next"},{"title":"Requirements​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#requirements","content":" PHP 8.4+ComposerNode.js 20+ &amp; npmDocker &amp; Docker Compose  ","version":"Next","tagName":"h2"},{"title":"Quick Start​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#quick-start","content":" ","version":"Next","tagName":"h2"},{"title":"1. Clone and Setup​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#1-clone-and-setup","content":" git clone https://github.com/David-Crty/databasement.git cd databasement make setup   This will:  Install Composer dependenciesRun database migrationsInstall npm dependenciesBuild frontend assets  You should be ready to go!  Open http://localhost:2226 in your browser to view the app.  ","version":"Next","tagName":"h3"},{"title":"2. Start Development Environment​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#2-start-development-environment","content":" make start   This starts all Docker services:  php — FrankenPHP server on http://localhost:2226queue — Queue worker for async backup/restore jobsmysql — MySQL 8.0 on port 3306postgres — PostgreSQL 16 on port 5432  Test database credentials: admin / admin / testdb  ","version":"Next","tagName":"h3"},{"title":"Available Commands​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#available-commands","content":" All PHP commands run through Docker. Use the Makefile targets or docker compose exec app &lt;command&gt;.  ","version":"Next","tagName":"h2"},{"title":"Testing​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#testing","content":" make test # Run all tests make test-filter FILTER=ServerTest # Run specific tests make test-coverage # Run with coverage report   ","version":"Next","tagName":"h3"},{"title":"Code Quality​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#code-quality","content":" make lint-fix # Auto-fix code style with Laravel Pint make lint-check # Check code style without fixing make phpstan # Run PHPStan static analysis   ","version":"Next","tagName":"h3"},{"title":"Database​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#database","content":" make migrate # Run pending migrations make migrate-fresh # Drop all tables and re-migrate make migrate-fresh-seed # Fresh migration with seeders make db-seed # Run database seeders   ","version":"Next","tagName":"h3"},{"title":"Assets​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#assets","content":" npm run build # Build production assets npm run dev # Start Vite dev server (HMR) make build # Alternative: build via Makefile   ","version":"Next","tagName":"h3"},{"title":"Docker Services​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#docker-services","content":" make start # Start all services docker compose logs -f # View logs from all services docker compose logs -f queue # View queue worker logs docker compose restart queue # Restart queue worker docker compose down # Stop all services   ","version":"Next","tagName":"h3"},{"title":"Git Hooks​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#git-hooks","content":" Pre-commit hooks (via Husky) automatically run:  make lint-fix — Auto-format code with Laravel Pintmake test — Run all Pest tests  Ensure tests pass before committing.  ","version":"Next","tagName":"h2"},{"title":"Architecture Overview​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#architecture-overview","content":" ","version":"Next","tagName":"h2"},{"title":"Tech Stack​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#tech-stack","content":" Layer\tTechnologyBackend\tLaravel 12, PHP 8.4+ Frontend\tLivewire, Mary UI, daisyUI, Tailwind CSS 4 Testing\tPest PHP Database\tSQLite (dev), supports MySQL/PostgreSQL/MariaDB Auth\tLaravel Fortify with 2FA support  ","version":"Next","tagName":"h3"},{"title":"Key Models​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#key-models","content":" DatabaseServer — Database connection configurationsVolume — Storage destinations (local, S3)Backup — Backup configurations (schedule, retention, volume)Snapshot — Individual backup snapshots with metadataBackupJob — Tracks backup/restore job execution and logs  ","version":"Next","tagName":"h3"},{"title":"Key Services​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#key-services","content":" BackupTask — Executes database dumps, compression, and storageRestoreTask — Downloads, decompresses, and restores snapshotsDatabaseListService — Lists databases for autocompleteDatabaseConnectionTester — Validates database connectivityShellProcessor — Executes shell commands with logging  ","version":"Next","tagName":"h3"},{"title":"Livewire Components​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#livewire-components","content":" DatabaseServer/* — CRUD operations for database serversVolume/* — CRUD operations for storage volumesBackupJob/Index — Job listing with logs modalSnapshot/Index — Snapshot listing and managementSettings/* — User settings (Profile, Password, TwoFactor)RestoreModal — 3-step wizard for snapshot restoration  ","version":"Next","tagName":"h3"},{"title":"Backup & Restore Workflow​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#backup--restore-workflow","content":" Backup Process:  Connect to database serverExecute database-specific dump (mysqldump/pg_dump)Compress with gzipUpload to configured volume (local/S3)Record snapshot metadata  Restore Process:  Select source snapshotDownload and decompressValidate compatibility (database types must match)Drop and recreate target databaseRestore SQL dump  Cross-Server Restore: Restore production snapshots to staging/preprod as long as database types match.  ","version":"Next","tagName":"h3"},{"title":"Configuration​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#configuration","content":" ","version":"Next","tagName":"h2"},{"title":"Environment Variables​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#environment-variables","content":" The .env file is committed to the repository and contains default development configuration. To override these values, create a .env.local file (which is gitignored).  Key development configuration:  # Application APP_URL=http://localhost:2226 # Database (for application data) DB_CONNECTION=sqlite # Queue QUEUE_CONNECTION=database # AWS S3 (optional, for S3 volume testing) AWS_ACCESS_KEY_ID= AWS_SECRET_ACCESS_KEY= AWS_DEFAULT_REGION=us-east-1   ","version":"Next","tagName":"h3"},{"title":"Testing Strategy​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#testing-strategy","content":" We use Pest PHP for testing. Key principles:  Test business logic and behaviors — Not framework internalsMock external services — AWS SDK, S3 client, etc.Don't mock models — Use real database interactions  ","version":"Next","tagName":"h2"},{"title":"What to Test​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#what-to-test","content":" Authorization (who can access what)Business logic (backup works, restore works, cleanup deletes correct snapshots)Integration points (external services, commands)  ","version":"Next","tagName":"h3"},{"title":"What NOT to Test​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#what-not-to-test","content":" Form validation rules (Laravel handles this)Eloquent relationships and cascadesSession flash messagesFramework behavior  ","version":"Next","tagName":"h3"},{"title":"Submitting Changes​","type":1,"pageTitle":"Development Guide","url":"/databasement/contributing/development#submitting-changes","content":" Create a feature branch from mainWrite tests for new functionalityEnsure all tests pass: make testRun code quality checks: make lint-fix &amp;&amp; make phpstanSubmit a pull request with a clear description  For significant changes, open an issue first to discuss the approach. ","version":"Next","tagName":"h2"},{"title":"Introduction","type":0,"sectionRef":"#","url":"/databasement/self-hosting/intro","content":"","keywords":"","version":"Next"},{"title":"Getting Started​","type":1,"pageTitle":"Introduction","url":"/databasement/self-hosting/intro#getting-started","content":" We provide guides to deploy Databasement using:  Docker - Single container deployment (recommended for most users)Docker Compose - Multi-container setup with external databaseKubernetes + Helm - For Kubernetes clustersNative Ubuntu - Traditional installation without Docker  ","version":"Next","tagName":"h2"},{"title":"Requirements​","type":1,"pageTitle":"Introduction","url":"/databasement/self-hosting/intro#requirements","content":" Databasement runs in a single container that includes:  FrankenPHP web serverQueue worker for async backup/restore jobsScheduler for automated backups  The only external requirement is a database for the application itself:  SQLite (simplest, built into the container)MySQL/MariaDB or PostgreSQL (recommended for production)  ","version":"Next","tagName":"h2"},{"title":"Quick Start​","type":1,"pageTitle":"Introduction","url":"/databasement/self-hosting/intro#quick-start","content":" The fastest way to try Databasement:  docker run -d \\ --name databasement \\ -p 2226:2226 \\ -v databasement-data:/app/storage \\ davidcrty/databasement:latest   Then open http://localhost:2226 in your browser.  note This quick start uses SQLite for the application database. For production deployments, see the Docker guide for recommended configurations.  ","version":"Next","tagName":"h2"},{"title":"Support​","type":1,"pageTitle":"Introduction","url":"/databasement/self-hosting/intro#support","content":" If you encounter issues with self-hosting, please open an issue on GitHub. ","version":"Next","tagName":"h2"},{"title":"Docker Compose","type":0,"sectionRef":"#","url":"/databasement/self-hosting/docker-compose","content":"","keywords":"","version":"Next"},{"title":"Prerequisites​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#prerequisites","content":" Docker and Docker Compose  ","version":"Next","tagName":"h2"},{"title":"Quick Start​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#quick-start","content":" ","version":"Next","tagName":"h2"},{"title":"1. Create Project Directory​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#1-create-project-directory","content":" mkdir databasement &amp;&amp; cd databasement   ","version":"Next","tagName":"h3"},{"title":"2. Generate Application Key​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#2-generate-application-key","content":" docker run --rm davidcrty/databasement:latest php artisan key:generate --show   Save this key for the next step.  Important The APP_KEY must be identical in both app and worker services. This key is used to encrypt sensitive data like database passwords. If the keys don't match, the worker will fail to decrypt credentials when running backup jobs.  ","version":"Next","tagName":"h3"},{"title":"3. Create docker-compose.yml​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#3-create-docker-composeyml","content":" SQLite (Simple Setup)​  docker-compose.yml services: app: image: davidcrty/databasement:latest container_name: databasement restart: unless-stopped ports: - &quot;2226:2226&quot; environment: APP_URL: http://localhost:2226 APP_KEY: base64:your-generated-key-here DB_CONNECTION: sqlite # or mysql, postgres DB_DATABASE: /data/database.sqlite volumes: - app-data:/data healthcheck: test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:2226&quot;] interval: 10s timeout: 5s retries: 5 worker: image: davidcrty/databasement:latest container_name: databasement-worker restart: unless-stopped command: sh -c &quot;php artisan db:wait &amp;&amp; php artisan queue:work --queue=backups,default --tries=3 --timeout=3600 --sleep=3 --max-jobs=1000&quot; environment: APP_URL: http://localhost:2226 APP_KEY: base64:your-generated-key-here DB_CONNECTION: sqlite # or mysql, postgres DB_DATABASE: /data/database.sqlite volumes: - app-data:/data depends_on: - app volumes: app-data:   MySQL (Production Setup)​  docker-compose.yml services: app: image: davidcrty/databasement:latest container_name: databasement restart: unless-stopped ports: - &quot;2226:2226&quot; environment: APP_URL: http://localhost:2226 APP_KEY: base64:your-generated-key-here DB_CONNECTION: mysql DB_HOST: mysql DB_PORT: 3306 DB_DATABASE: databasement DB_USERNAME: databasement DB_PASSWORD: your-secure-password volumes: - app-data:/data depends_on: mysql: condition: service_healthy healthcheck: test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:2226&quot;] interval: 10s timeout: 5s retries: 5 worker: image: davidcrty/databasement:latest container_name: databasement-worker restart: unless-stopped command: sh -c &quot;php artisan db:wait &amp;&amp; php artisan queue:work --queue=backups,default --tries=3 --timeout=3600 --sleep=3 --max-jobs=1000&quot; environment: APP_URL: http://localhost:2226 APP_KEY: base64:your-generated-key-here DB_CONNECTION: mysql DB_HOST: mysql DB_PORT: 3306 DB_DATABASE: databasement DB_USERNAME: databasement DB_PASSWORD: your-secure-password volumes: - app-data:/data depends_on: mysql: condition: service_healthy mysql: image: mysql:8.0 container_name: databasement-mysql restart: unless-stopped environment: MYSQL_ROOT_PASSWORD: your-root-password MYSQL_DATABASE: databasement MYSQL_USER: databasement MYSQL_PASSWORD: your-secure-password volumes: - mysql-data:/var/lib/mysql healthcheck: test: [&quot;CMD&quot;, &quot;mysqladmin&quot;, &quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;] interval: 10s timeout: 5s retries: 5 volumes: app-data: mysql-data:   Important The APP_KEY must be identical in both app and worker services. This key is used to encrypt sensitive data like database passwords. If the keys don't match, the worker will fail to decrypt credentials when running backup jobs.  tip The worker service runs the Laravel queue worker as a separate container. This provides better stability and allows independent restarts without affecting the web application. The worker processes backup and restore jobs from the queue.  ","version":"Next","tagName":"h3"},{"title":"4. Start the Services​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#4-start-the-services","content":" docker compose up -d   ","version":"Next","tagName":"h3"},{"title":"5. Access the Application​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#5-access-the-application","content":" Open http://localhost:2226 in your browser.  note To expose your Databasement instance with HTTPS, you can use Traefik as a reverse proxy. For detailed instructions on how to configure Traefik with Docker, please refer to the official Traefik documentation.  ","version":"Next","tagName":"h3"},{"title":"Production Setup (External Database)​","type":1,"pageTitle":"Docker Compose","url":"/databasement/self-hosting/docker-compose#production-setup-external-database","content":" For production, we recommend using MySQL or PostgreSQL instead of SQLite. Check the database configuration guide for more information. ","version":"Next","tagName":"h2"},{"title":"Configuration","type":0,"sectionRef":"#","url":"/databasement/self-hosting/configuration","content":"","keywords":"","version":"Next"},{"title":"Application Settings​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#application-settings","content":" Variable\tDescription\tDefaultAPP_DEBUG\tEnable debug mode (set to false in production)\tfalse APP_URL\tFull URL where the app is accessible\thttp://localhost:2226 APP_KEY\tApplication encryption key (required)\t-  ","version":"Next","tagName":"h2"},{"title":"Generating the Application Key​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#generating-the-application-key","content":" The APP_KEY is required for encryption. Generate one with:  docker run --rm davidcrty/databasement:latest php artisan key:generate --show   Copy the output (e.g., base64:xxxx...) and set it as APP_KEY.  ","version":"Next","tagName":"h3"},{"title":"Database Configuration​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#database-configuration","content":" Databasement needs a database to store its own data (users, servers, backup configurations).  ","version":"Next","tagName":"h2"},{"title":"SQLite (Simplest)​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#sqlite-simplest","content":" DB_CONNECTION=sqlite DB_DATABASE=/data/database.sqlite   note When using SQLite, make sure to mount a volume for /data to persist data.  ","version":"Next","tagName":"h3"},{"title":"MySQL / MariaDB​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#mysql--mariadb","content":" Create a database and user for Databasement on your MySQL server:  MySQL:  CREATE DATABASE databasement CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; CREATE USER 'databasement'@'%' IDENTIFIED BY 'your-secure-password'; GRANT ALL PRIVILEGES ON databasement.* TO 'databasement'@'%'; FLUSH PRIVILEGES;   DB_CONNECTION=mysql DB_HOST=your-mysql-host DB_PORT=3306 DB_DATABASE=databasement DB_USERNAME=databasement DB_PASSWORD=your-secure-password   ","version":"Next","tagName":"h3"},{"title":"PostgreSQL​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#postgresql","content":" Create a database and user for Databasement on your PostgreSQL server:  PostgreSQL:  CREATE DATABASE databasement; CREATE USER databasement WITH ENCRYPTED PASSWORD 'your-secure-password'; GRANT ALL PRIVILEGES ON DATABASE databasement TO databasement;   DB_CONNECTION=pgsql DB_HOST=your-postgres-host DB_PORT=5432 DB_DATABASE=databasement DB_USERNAME=databasement DB_PASSWORD=your-secure-password   ","version":"Next","tagName":"h3"},{"title":"Reverse Proxy / Trusted Proxies​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#reverse-proxy--trusted-proxies","content":" When running behind a reverse proxy (nginx, Traefik, Kubernetes Ingress), configure trusted proxies so Laravel can correctly determine the client IP and protocol.  Variable\tDescription\tDefaultTRUSTED_PROXIES\tIP addresses or CIDR ranges of trusted proxies\t127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,::1')  Values:  127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,::1') - This covers all RFC 1918 private ranges* - Trust all proxies (suitable for Kubernetes/Docker where proxy IPs are dynamic)Comma-separated IPs: 10.0.0.1,192.168.1.0/24 - Trust specific proxiesEmpty - Trust no proxies  # Trust all proxies (default, recommended for containerized environments) TRUSTED_PROXIES=* # Trust specific proxy IPs TRUSTED_PROXIES=10.0.0.1,10.0.0.2 # Trust a CIDR range TRUSTED_PROXIES=10.0.0.0/8   ","version":"Next","tagName":"h2"},{"title":"Backup Configuration​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#backup-configuration","content":" Configure backup behavior, schedules, and job settings.  Variable\tDescription\tDefaultBACKUP_WORKING_DIRECTORY\tTemporary directory for backup operations\t/tmp/backups MYSQL_CLI_TYPE\tMySQL CLI type: mariadb or mysql\tmariadb BACKUP_JOB_TIMEOUT\tMaximum seconds a backup/restore job can run\t7200 (2 hours) BACKUP_JOB_TRIES\tNumber of times to retry failed jobs\t3 BACKUP_JOB_BACKOFF\tSeconds to wait before retrying\t60 BACKUP_DAILY_CRON\tCron schedule for daily backups\t0 2 * * * (2:00 AM) BACKUP_WEEKLY_CRON\tCron schedule for weekly backups\t0 3 * * 0 (Sunday 3:00 AM) BACKUP_CLEANUP_CRON\tCron schedule for snapshot cleanup\t0 4 * * * (4:00 AM)  ","version":"Next","tagName":"h2"},{"title":"S3 Storage​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#s3-storage","content":" Databasement supports AWS S3 and S3-compatible storage (MinIO, DigitalOcean Spaces, etc.) for backup volumes.  We use ENV variables to configure the S3 client.  S3 IAM Permissions​  The AWS credentials need these permissions:  { &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ { &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;s3:PutObject&quot;, &quot;s3:GetObject&quot;, &quot;s3:DeleteObject&quot;, &quot;s3:ListBucket&quot; ], &quot;Resource&quot;: [ &quot;arn:aws:s3:::your-bucket-name&quot;, &quot;arn:aws:s3:::your-bucket-name/*&quot; ] } ] }   Access keys (Optional)​  This is not recommended but for standard AWS access using access keys:  AWS_ACCESS_KEY_ID=your-access-key AWS_SECRET_ACCESS_KEY=your-secret-key AWS_REGION=us-east-1   S3-Compatible Storage (MinIO, etc.)​  For S3-compatible storage providers, configure a custom endpoint:  AWS_ENDPOINT_URL_S3=https://minio.yourdomain.com AWS_USE_PATH_STYLE_ENDPOINT=true   IAM Role Assumption (Restricted Environments)​  To force Databasement to assume an IAM role, set the AWS_CUSTOM_ROLE_ARN environment variable:  AWS_CUSTOM_ROLE_ARN=arn:aws:iam::123456789:role/your-role-name   AWS Profile Support​  If using AWS credential profiles (from ~/.aws/credentials):  AWS_S3_PROFILE=my-s3-profile   All S3 Environment Variables​  Variable\tDescription\tDefaultAWS_ACCESS_KEY_ID\tAWS access key (picked up automatically by SDK)\t- AWS_SECRET_ACCESS_KEY\tAWS secret key (picked up automatically by SDK)\t- AWS_REGION\tAWS region\tus-east-1 AWS_ENDPOINT_URL_S3\tCustom S3 endpoint URL\t- AWS_USE_PATH_STYLE_ENDPOINT\tUse path-style URLs (required for MinIO)\tfalse AWS_S3_PROFILE\tAWS credential profile for S3\t- AWS_CUSTOM_ROLE_ARN\tIAM custom role ARN to assume\t- AWS_ROLE_SESSION_NAME\tSession name for role assumption\tdatabasement AWS_ENDPOINT_URL_STS\tCustom STS endpoint URL\t- AWS_STS_PROFILE\tAWS credential profile for STS\t-  ","version":"Next","tagName":"h2"},{"title":"Troubleshooting​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#troubleshooting","content":" Debug the aws configuration by running:  php artisan config:show aws   This is where we create the S3 client: app/Services/Backup/Filesystems/Awss3Filesystem.php  ","version":"Next","tagName":"h3"},{"title":"Logging​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#logging","content":" Variable\tDescription\tDefaultLOG_CHANNEL\tLogging channel\tstderr LOG_LEVEL\tMinimum log level\tdebug  For production, stderr is recommended as logs will be captured by Docker.  ","version":"Next","tagName":"h2"},{"title":"Complete Example​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#complete-example","content":" Here's a complete .env file for a production deployment with MySQL:  # Application APP_DEBUG=false APP_URL=https://backup.yourdomain.com APP_KEY=base64:your-generated-key-here # Database (for Databasement itself) DB_CONNECTION=mysql DB_HOST=mysql.yourdomain.com DB_PORT=3306 DB_DATABASE=databasement DB_USERNAME=databasement DB_PASSWORD=secure-password-here # Logging LOG_CHANNEL=stderr LOG_LEVEL=warning   ","version":"Next","tagName":"h2"},{"title":"Troubleshooting​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#troubleshooting-1","content":" ","version":"Next","tagName":"h2"},{"title":"Enable Debug Mode​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#enable-debug-mode","content":" Enable debug mode with APP_DEBUG=true in your values file. Go to https://dabasement.yourdomain.com/health/debug to view the debug page. Check the logs Report any issues on GitHub  ","version":"Next","tagName":"h3"},{"title":"Run Artisan Commands​","type":1,"pageTitle":"Configuration","url":"/databasement/self-hosting/configuration#run-artisan-commands","content":" php artisan migrate:status # Check database migrations php artisan config:show database # View database configuration  ","version":"Next","tagName":"h3"},{"title":"Backups","type":0,"sectionRef":"#","url":"/databasement/user-guide/backups","content":"","keywords":"","version":"Next"},{"title":"Creating a Backup​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#creating-a-backup","content":" ","version":"Next","tagName":"h2"},{"title":"Manual Backup​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#manual-backup","content":" Go to Database ServersFind the server you want to backupClick BackupSelect the target database (or leave empty for all databases)Choose a storage volume for the backupClick Start Backup  The backup will be queued and processed in the background. You can monitor progress on the Snapshots page.  ","version":"Next","tagName":"h3"},{"title":"How Backups Work​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#how-backups-work","content":" When you create a backup, Databasement:  Connects to the database serverRuns the appropriate dump command (mysqldump or pg_dump)Compresses the output with gzipTransfers the compressed file to the selected storage volumeCreates a snapshot record with metadata  ","version":"Next","tagName":"h2"},{"title":"Backup Commands​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#backup-commands","content":" Databasement uses native database tools for reliable backups:  MySQL / MariaDB:  mysqldump --single-transaction --routines --triggers --events database_name   PostgreSQL:  pg_dump --format=plain database_name   ","version":"Next","tagName":"h3"},{"title":"Backup Status​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#backup-status","content":" Each backup (snapshot) has a status:  Status\tDescriptionPending\tBackup is queued, waiting to be processed In Progress\tBackup is currently running Completed\tBackup finished successfully Failed\tBackup encountered an error  ","version":"Next","tagName":"h2"},{"title":"Monitoring Backups​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#monitoring-backups","content":" View all backup jobs on the Snapshots page. You can see:  Source server and databaseBackup timestampFile sizeStorage volumeStatus  ","version":"Next","tagName":"h2"},{"title":"Failed Backups​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#failed-backups","content":" If a backup fails, check:  Database connectivity: Can Databasement still connect to the server?Disk space: Is there enough space on the storage volume?Permissions: Does the database user have backup privileges?Timeout: Large databases may need more time  Failed backup reasons are logged and visible in the snapshot details.  ","version":"Next","tagName":"h2"},{"title":"Best Practices​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#best-practices","content":" ","version":"Next","tagName":"h2"},{"title":"Before Production Backups​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#before-production-backups","content":" Test the connection before creating backupsVerify restore by testing a restore to a development serverMonitor disk space on your storage volumes  ","version":"Next","tagName":"h3"},{"title":"Backup Sizing​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#backup-sizing","content":" Compressed backup sizes vary, but as a rough guide:  A 1GB database typically compresses to 100-300MBText-heavy data compresses better than binary data  ","version":"Next","tagName":"h3"},{"title":"Security Considerations​","type":1,"pageTitle":"Backups","url":"/databasement/user-guide/backups#security-considerations","content":" Use dedicated backup users with minimal required privilegesStore backups in secure, encrypted storage when possibleRegularly test your restore process ","version":"Next","tagName":"h3"},{"title":"Introduction","type":0,"sectionRef":"#","url":"/databasement/user-guide/intro","content":"","keywords":"","version":"Next"},{"title":"Kubernetes + Helm","type":0,"sectionRef":"#","url":"/databasement/self-hosting/kubernetes-helm","content":"","keywords":"","version":"Next"},{"title":"Installation​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#installation","content":" ","version":"Next","tagName":"h2"},{"title":"1. Add the Helm Repository​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#1-add-the-helm-repository","content":" helm repo add databasement https://david-crty.github.io/databasement helm repo update   ","version":"Next","tagName":"h3"},{"title":"2. Generate an Application Key​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#2-generate-an-application-key","content":" Before deploying, generate an application encryption key:  docker run --rm davidcrty/databasement:latest php artisan key:generate --show   Copy the output (e.g., base64:abc123...) for use in your values file.  ","version":"Next","tagName":"h3"},{"title":"3. Create a Values File​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#3-create-a-values-file","content":" Minimal Configuration (SQLite)​  For simple deployments using SQLite:  values.yaml app: url: https://backup.yourdomain.com appKey: value: &quot;base64:your-generated-key-here&quot; ingress: enabled: true className: nginx host: backup.yourdomain.com # For HTTPS using cert-manager: # tlsSecretName: databasement-tls # annotations: # cert-manager.io/cluster-issuer: letsencrypt-prod   Production Configuration (External Database)​  For production, we recommend using MySQL or PostgreSQL instead of SQLite:  values.yaml # ... other app config database: connection: mysql # or pgsql host: your-mysql-host.example.com port: 3306 name: databasement username: databasement password: value: &quot;your-secure-password&quot; ingress: enabled: true className: nginx host: backup.yourdomain.com   Using Existing Secrets​  For sensitive values, you can reference existing Kubernetes secrets instead of storing them in your values file:  values.yaml app: appKey: fromSecret: secretName: &quot;my-app-secret&quot; secretKey: &quot;APP_KEY&quot; database: connection: mysql host: mysql.example.com name: databasement username: databasement password: fromSecret: secretName: &quot;my-db-secret&quot; secretKey: &quot;password&quot;   ","version":"Next","tagName":"h3"},{"title":"4. Install the Chart​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#4-install-the-chart","content":" helm upgrade --install databasement databasement/databasement -f values.yaml   ","version":"Next","tagName":"h3"},{"title":"Configuration​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#configuration","content":" For the full list of configurable parameters, see the values.yaml file.  For all available environment variables, see the Configuration page.  ","version":"Next","tagName":"h2"},{"title":"Custom Environment Variables​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#custom-environment-variables","content":" Use extraEnv to pass additional environment variables:  extraEnv: AWS_ACCESS_KEY_ID: &quot;your-access-key&quot; AWS_SECRET_ACCESS_KEY: &quot;your-secret-key&quot; AWS_DEFAULT_REGION: &quot;us-east-1&quot;   ","version":"Next","tagName":"h3"},{"title":"Environment Variables from Secrets/ConfigMaps​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#environment-variables-from-secretsconfigmaps","content":" Use extraEnvFrom to load environment variables from existing secrets or configmaps:  extraEnvFrom: - secretRef: name: aws-credentials - configMapRef: name: app-config   This is useful for injecting credentials managed by external secret management tools (e.g., External Secrets Operator, Sealed Secrets).  ","version":"Next","tagName":"h3"},{"title":"Persistence​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#persistence","content":" By default, persistence is enabled with a 10Gi volume:  persistence: enabled: true storageClass: &quot;&quot; # Uses default storage class size: 10Gi accessModes: - ReadWriteOnce   ","version":"Next","tagName":"h3"},{"title":"Worker Configuration​","type":1,"pageTitle":"Kubernetes + Helm","url":"/databasement/self-hosting/kubernetes-helm#worker-configuration","content":" The queue worker runs as a sidecar container by default. You can customize its behavior:  worker: enabled: true command: &quot;php artisan queue:work --queue=backups,default --tries=3 --timeout=3600&quot; resources: limits: cpu: 500m memory: 512Mi requests: cpu: 100m memory: 256Mi   For high-availability setups with an external database, you can run the worker as a separate deployment:  worker: separateDeployment: true replicaCount: 2   note Separate worker deployment requires either ReadWriteMany storage or AWS S3 storage + an external database (MySQL/PostgreSQL). ","version":"Next","tagName":"h3"},{"title":"Getting Started​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#getting-started","content":" After installing Databasement, access the web interface and create your first account.  ","version":"Next","tagName":"h2"},{"title":"1. Create Your Account​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#1-create-your-account","content":" When you first access Databasement, you'll be prompted to register. Create an account with:  Your nameEmail addressPassword  Two-factor authentication can be enabled later in your account settings for additional security.  ","version":"Next","tagName":"h3"},{"title":"2. Add a Database Server​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#2-add-a-database-server","content":" Navigate to Database Servers and click Add Server. You'll need:  Name: A friendly name for this server (e.g., &quot;Production MySQL&quot;)Type: MySQL, PostgreSQL, or MariaDBHost: The server hostname or IP addressPort: The database port (default: 3306 for MySQL, 5432 for PostgreSQL)Username: Database user with backup privilegesPassword: The database password  Click Test Connection to verify the connection before saving.  ","version":"Next","tagName":"h3"},{"title":"3. Create a Storage Volume​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#3-create-a-storage-volume","content":" Before creating backups, you need a storage volume. Navigate to Volumes and click Add Volume.  Databasement supports:  Local storage: Store backups on the server's filesystemS3-compatible storage: Amazon S3, MinIO, DigitalOcean Spaces, etc.  ","version":"Next","tagName":"h3"},{"title":"4. Create Your First Backup​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#4-create-your-first-backup","content":" Go to Database Servers, find your server, and click Backup. Select the database and storage volume, then start the backup.  Backups run asynchronously - you can navigate away and check progress later on the Snapshots page.  ","version":"Next","tagName":"h3"},{"title":"5. Restore a Snapshot​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#5-restore-a-snapshot","content":" To restore a backup, go to Snapshots, find the snapshot you want to restore, and click Restore. You can restore to:  The same server and database (rollback)A different database on the same serverA completely different server (cross-server restore)  ","version":"Next","tagName":"h3"},{"title":"Next Steps​","type":1,"pageTitle":"Introduction","url":"/databasement/user-guide/intro#next-steps","content":" Managing Database ServersConfiguring BackupsWorking with SnapshotsStorage VolumesPermissions ","version":"Next","tagName":"h2"},{"title":"Database Servers","type":0,"sectionRef":"#","url":"/databasement/user-guide/database-servers","content":"","keywords":"","version":"Next"},{"title":"Adding a Server​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#adding-a-server","content":" Navigate to Database ServersClick Add ServerFill in the connection details:  Field\tDescriptionName\tA friendly name to identify this server Type\tThe database type (MySQL, PostgreSQL, MariaDB) Host\tHostname or IP address of the database server Port\tDatabase port (3306 for MySQL/MariaDB, 5432 for PostgreSQL) Username\tDatabase user for connecting Password\tUser's password  Click Test Connection to verify connectivityClick Save to add the server  ","version":"Next","tagName":"h2"},{"title":"Connection Requirements​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#connection-requirements","content":" ","version":"Next","tagName":"h2"},{"title":"MySQL / MariaDB​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#mysql--mariadb","content":" The database user needs the following privileges for backup operations:  GRANT SELECT, SHOW VIEW, TRIGGER, LOCK TABLES, PROCESS, EVENT, RELOAD ON database_name.* TO 'backup_user'@'%';   For backing up all databases:  GRANT SELECT, SHOW VIEW, TRIGGER, LOCK TABLES, PROCESS, EVENT, RELOAD ON *.* TO 'backup_user'@'%';   ","version":"Next","tagName":"h3"},{"title":"PostgreSQL​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#postgresql","content":" The user should have read access to the databases you want to backup:  GRANT CONNECT ON DATABASE database_name TO backup_user; GRANT USAGE ON SCHEMA public TO backup_user; GRANT SELECT ON ALL TABLES IN SCHEMA public TO backup_user;   For full backup capabilities, consider using a superuser or the database owner.  ","version":"Next","tagName":"h3"},{"title":"Testing Connections​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#testing-connections","content":" Before saving a server, always test the connection:  Fill in all connection detailsClick Test ConnectionThe system will attempt to connect and verify credentialsIf successful, you'll see a confirmation messageIf it fails, check the error message for troubleshooting  ","version":"Next","tagName":"h2"},{"title":"Common Connection Issues​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#common-connection-issues","content":" Error\tSolutionConnection refused\tVerify host, port, and that the database server is running Access denied\tCheck username and password Unknown host\tVerify the hostname is correct and DNS is resolving Connection timeout\tCheck firewall rules and network connectivity  ","version":"Next","tagName":"h3"},{"title":"Editing Servers​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#editing-servers","content":" Go to Database ServersFind the server you want to editClick the Edit buttonUpdate the connection detailsTest the connection againSave your changes  ","version":"Next","tagName":"h2"},{"title":"Deleting Servers​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#deleting-servers","content":" Go to Database ServersFind the server you want to deleteClick the Delete buttonConfirm the deletion  warning Deleting a server does not delete its backup snapshots. Existing snapshots will remain in storage but cannot be easily associated with the deleted server.  ","version":"Next","tagName":"h2"},{"title":"Server Status​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#server-status","content":" On the Database Servers list, you can see:  Server name and typeHost and portLast backup time (if any)Number of snapshots  ","version":"Next","tagName":"h2"},{"title":"Quick Actions​","type":1,"pageTitle":"Database Servers","url":"/databasement/user-guide/database-servers#quick-actions","content":" From the server list, you can quickly:  Backup: Start an immediate backup of a databaseEdit: Modify server settingsDelete: Remove the server ","version":"Next","tagName":"h2"},{"title":"Native Ubuntu Installation","type":0,"sectionRef":"#","url":"/databasement/self-hosting/native-ubuntu","content":"","keywords":"","version":"Next"},{"title":"Prerequisites​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#prerequisites","content":" Ubuntu 22.04 LTS or 24.04 LTSRoot or sudo accessA web server (Nginx or Apache)  ","version":"Next","tagName":"h2"},{"title":"Install PHP 8.4​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#install-php-84","content":" # Add PHP repository sudo add-apt-repository ppa:ondrej/php -y sudo apt update # Install PHP 8.4 and required extensions sudo apt install -y \\ php8.4 \\ php8.4-fpm \\ php8.4-cli \\ php8.4-common \\ php8.4-curl \\ php8.4-mbstring \\ php8.4-xml \\ php8.4-zip \\ php8.4-pdo \\ php8.4-mysql \\ php8.4-pgsql \\ php8.4-sqlite3 \\ php8.4-intl \\ php8.4-pcntl \\ php8.4-opcache   ","version":"Next","tagName":"h2"},{"title":"Install Database CLI Tools​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#install-database-cli-tools","content":" Databasement requires database CLI tools to perform backup and restore operations.  ","version":"Next","tagName":"h2"},{"title":"For MySQL/MariaDB backups​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#for-mysqlmariadb-backups","content":" # Install MariaDB client (includes mariadb-dump and mariadb commands) sudo apt install -y mariadb-client # Or install MySQL client (includes mysqldump and mysql commands) # sudo apt install -y mysql-client   note By default, Databasement uses MariaDB CLI tools (mariadb-dump, mariadb). If you prefer MySQL tools (mysqldump, mysql), set the environment variable MYSQL_CLI_TYPE=mysql.  ","version":"Next","tagName":"h3"},{"title":"For PostgreSQL backups​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#for-postgresql-backups","content":" # Install PostgreSQL client (includes pg_dump and psql commands) sudo apt install -y postgresql-client   ","version":"Next","tagName":"h3"},{"title":"For SQLite backups​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#for-sqlite-backups","content":" SQLite support is built into PHP - no additional tools needed.  ","version":"Next","tagName":"h3"},{"title":"Install Composer​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#install-composer","content":" curl -sS https://getcomposer.org/installer | php sudo mv composer.phar /usr/local/bin/composer   ","version":"Next","tagName":"h2"},{"title":"Install Node.js​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#install-nodejs","content":" curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash - sudo apt install -y nodejs   ","version":"Next","tagName":"h2"},{"title":"Install Nginx​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#install-nginx","content":" sudo apt install -y nginx   ","version":"Next","tagName":"h2"},{"title":"Download and Configure Databasement​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#download-and-configure-databasement","content":" # Clone the repository cd /var/www/databasement git clone https://github.com/David-Crty/databasement.git . # Install PHP dependencies composer install --no-dev --optimize-autoloader # Install Node dependencies and build assets npm install npm run build # Publish Livewire assets php artisan vendor:publish --force --tag=livewire:assets   ","version":"Next","tagName":"h2"},{"title":"Configure Environment​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#configure-environment","content":" # Generate application key php artisan key:generate   Edit the .env file with your configuration:  nano .env   Essential settings:  APP_ENV=production APP_DEBUG=false APP_URL=https://your-domain.com # Database for Databasement (choose one) # SQLite (simplest) DB_CONNECTION=sqlite DB_DATABASE=/var/www/databasement/database/database.sqlite # Or MySQL # DB_CONNECTION=mysql # DB_HOST=127.0.0.1 # DB_PORT=3306 # DB_DATABASE=databasement # DB_USERNAME=databasement # DB_PASSWORD=your-password # Or PostgreSQL # DB_CONNECTION=pgsql # DB_HOST=127.0.0.1 # DB_PORT=5432 # DB_DATABASE=databasement # DB_USERNAME=databasement # DB_PASSWORD=your-password # Backup working directory BACKUP_WORKING_DIRECTORY=/tmp/backups   For all available environment variables, see the Configuration page.  ","version":"Next","tagName":"h2"},{"title":"Run Database Migrations​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#run-database-migrations","content":" # Run migrations cd /var/www/databasement php artisan migrate --force   ","version":"Next","tagName":"h2"},{"title":"Configure Nginx​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#configure-nginx","content":" Create a new Nginx configuration:  sudo nano /etc/nginx/sites-available/databasement   Add the following configuration:  server { listen 80; server_name your-domain.com; root /var/www/databasement/public; add_header X-Frame-Options &quot;SAMEORIGIN&quot;; add_header X-Content-Type-Options &quot;nosniff&quot;; index index.php; charset utf-8; location / { try_files $uri $uri/ /index.php?$query_string; } location = /favicon.ico { access_log off; log_not_found off; } location = /robots.txt { access_log off; log_not_found off; } error_page 404 /index.php; location ~ \\.php$ { fastcgi_pass unix:/var/run/php/php8.4-fpm.sock; fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name; include fastcgi_params; fastcgi_hide_header X-Powered-By; } location ~ /\\.(?!well-known).* { deny all; } }   Enable the site:  sudo ln -s /etc/nginx/sites-available/databasement /etc/nginx/sites-enabled/ sudo nginx -t sudo systemctl reload nginx   ","version":"Next","tagName":"h2"},{"title":"Configure Queue Worker (Systemd)​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#configure-queue-worker-systemd","content":" The queue worker is required to process backup and restore jobs.  Create a systemd service:  sudo nano /etc/systemd/system/databasement-queue.service   Add the following:  [Unit] Description=Databasement Queue Worker After=network.target [Service] User=www-data Group=www-data Restart=always RestartSec=5 WorkingDirectory=/var/www/databasement ExecStart=/usr/bin/php artisan queue:work --queue=backups,default --tries=3 --timeout=3600 --sleep=3 --max-jobs=1000 [Install] WantedBy=multi-user.target   Enable and start the service:  sudo systemctl daemon-reload sudo systemctl enable databasement-queue sudo systemctl start databasement-queue   Check status:  sudo systemctl status databasement-queue   ","version":"Next","tagName":"h2"},{"title":"Configure Scheduler (Cron)​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#configure-scheduler-cron","content":" The scheduler runs automated backups based on your configured schedules.  crontab -e   Add this line:  * * * * * cd /var/www/databasement &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1   ","version":"Next","tagName":"h2"},{"title":"Verification​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#verification","content":" Open your browser and navigate to your domainCreate your first user accountAdd a database server and test the connectionCreate a backup to verify everything works  ","version":"Next","tagName":"h2"},{"title":"Troubleshooting​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#troubleshooting","content":" Check Queue Worker Logs  sudo journalctl -u databasement-queue -f   Check PHP-FPM LogsCheck Nginx Logs  ","version":"Next","tagName":"h2"},{"title":"Test Database CLI Tools​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#test-database-cli-tools","content":" # Test MariaDB/MySQL client mariadb --version # or: mysql --version # Test PostgreSQL client psql --version # Test pg_dump pg_dump --version   ","version":"Next","tagName":"h3"},{"title":"Run Artisan Commands​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#run-artisan-commands","content":" php artisan migrate:status php artisan config:show database   ","version":"Next","tagName":"h3"},{"title":"Updating Databasement​","type":1,"pageTitle":"Native Ubuntu Installation","url":"/databasement/self-hosting/native-ubuntu#updating-databasement","content":" # Pull latest changes git pull origin main # Install dependencies composer install --no-dev --optimize-autoloader npm install npm run build # Run migrations php artisan migrate --force # Clear caches php artisan optimize:clear # Restart queue worker sudo systemctl restart databasement-queue  ","version":"Next","tagName":"h2"},{"title":"Snapshots","type":0,"sectionRef":"#","url":"/databasement/user-guide/snapshots","content":"","keywords":"","version":"Next"},{"title":"Viewing Snapshots​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#viewing-snapshots","content":" Navigate to Snapshots to see all your backup snapshots. The list shows:  Source server and databaseCreation timestampFile sizeStorage volume locationStatus  ","version":"Next","tagName":"h2"},{"title":"Snapshot Details​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#snapshot-details","content":" Click on a snapshot to see detailed information:  Storage URI - The full location of the backup fileCreation time and durationDatabase type and versionCompression ratioChecksum for integrity verification  ","version":"Next","tagName":"h2"},{"title":"Storage URI Format​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#storage-uri-format","content":" Each snapshot stores its location as a URI that identifies both the storage type and the full path to the backup file. This makes snapshots self-describing and portable.  ","version":"Next","tagName":"h2"},{"title":"Local Storage​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#local-storage","content":" local:///data/backups/MyServer-mydb-2025-12-22-164400.sql.gz   Format: local://&lt;absolute-path&gt;  ","version":"Next","tagName":"h3"},{"title":"S3 Storage​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#s3-storage","content":" s3://my-bucket/backups/MyServer-mydb-2025-12-22-164400.sql.gz   Format: s3://&lt;bucket&gt;/&lt;path&gt;  The URI contains the complete location, making it easy to identify where each backup is stored without needing to look up volume configuration.  ","version":"Next","tagName":"h3"},{"title":"Restoring a Snapshot​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#restoring-a-snapshot","content":" Databasement supports flexible restore options:  ","version":"Next","tagName":"h2"},{"title":"1. Same Server Restore (Rollback)​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#1-same-server-restore-rollback","content":" Restore to the same server and database:  Find the snapshot you want to restoreClick RestoreConfirm you want to restore to the original locationClick Start Restore  warning This will overwrite all current data in the target database!  ","version":"Next","tagName":"h3"},{"title":"2. Different Database Restore​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#2-different-database-restore","content":" Restore to a different database on the same server:  Find the snapshotClick RestoreSelect the same server but specify a different database nameClick Start Restore  ","version":"Next","tagName":"h3"},{"title":"3. Cross-Server Restore​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#3-cross-server-restore","content":" Restore to a completely different server:  Find the snapshotClick RestoreSelect a different target serverChoose the target databaseClick Start Restore  note Cross-server restores require matching database types. You cannot restore a MySQL backup to PostgreSQL.  ","version":"Next","tagName":"h3"},{"title":"Restore Process​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#restore-process","content":" When you restore a snapshot, Databasement:  Downloads the snapshot from storageDecompresses the backup fileConnects to the target database serverDrops and recreates the target database (if it exists)Restores the data using native database tools  ","version":"Next","tagName":"h2"},{"title":"Restore Commands​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#restore-commands","content":" MySQL / MariaDB:  mysql database_name &lt; backup.sql   PostgreSQL:  psql database_name &lt; backup.sql   ","version":"Next","tagName":"h3"},{"title":"Restore Status​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#restore-status","content":" Like backups, restores have status:  Status\tDescriptionPending\tRestore is queued In Progress\tRestore is running Completed\tRestore finished successfully Failed\tRestore encountered an error  ","version":"Next","tagName":"h2"},{"title":"Deleting Snapshots​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#deleting-snapshots","content":" To delete a snapshot:  Find the snapshot in the listClick DeleteConfirm the deletion  This removes both the snapshot record and the actual backup file from storage.  ","version":"Next","tagName":"h2"},{"title":"Snapshot Retention​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#snapshot-retention","content":" Consider implementing a retention policy:  Keep daily backups for a weekKeep weekly backups for a monthKeep monthly backups for a year  You can manually delete old snapshots or implement automated cleanup based on your needs.  ","version":"Next","tagName":"h2"},{"title":"Downloading Snapshots​","type":1,"pageTitle":"Snapshots","url":"/databasement/user-guide/snapshots#downloading-snapshots","content":" If you need to download a backup file directly:  Go to the snapshot detailsClick Download (if available for your storage type)  For S3 storage, you can also access files directly through your S3 client or console. ","version":"Next","tagName":"h2"},{"title":"Storage Volumes","type":0,"sectionRef":"#","url":"/databasement/user-guide/volumes","content":"","keywords":"","version":"Next"},{"title":"Volume Types​","type":1,"pageTitle":"Storage Volumes","url":"/databasement/user-guide/volumes#volume-types","content":" ","version":"Next","tagName":"h2"},{"title":"Local Volume​","type":1,"pageTitle":"Storage Volumes","url":"/databasement/user-guide/volumes#local-volume","content":" info Ensure the Databasement container has write access to the specified path. You may need to mount a volume when running Docker.  ","version":"Next","tagName":"h3"},{"title":"S3 Volume​","type":1,"pageTitle":"Storage Volumes","url":"/databasement/user-guide/volumes#s3-volume","content":" info Checks the S3 Storage doc in Configuration to learn how to configure S3 connectivity.  ","version":"Next","tagName":"h3"},{"title":"Deleting Volumes​","type":1,"pageTitle":"Storage Volumes","url":"/databasement/user-guide/volumes#deleting-volumes","content":" warning Deleting a volume does not delete the backup files stored in it. Files remain in the storage location but become inaccessible through Databasement. ","version":"Next","tagName":"h2"},{"title":"Permissions","type":0,"sectionRef":"#","url":"/databasement/user-guide/permissions","content":"","keywords":"","version":"Next"},{"title":"User Roles​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#user-roles","content":" Role\tDescriptionAdmin\tFull access to all features including user management Member\tCan manage database servers, volumes, and backups, but cannot manage users Viewer\tRead-only access to view resources and monitor backup status  ","version":"Next","tagName":"h2"},{"title":"Permissions by Resource​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#permissions-by-resource","content":" ","version":"Next","tagName":"h2"},{"title":"Database Servers​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#database-servers","content":" Action\tViewer\tMember\tAdminView list\t✅\t✅\t✅ Create\t❌\t✅\t✅ Edit\t❌\t✅\t✅ Delete\t❌\t✅\t✅ Run backup\t❌\t✅\t✅ Restore to server\t❌\t✅\t✅  ","version":"Next","tagName":"h3"},{"title":"Volumes​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#volumes","content":" Action\tViewer\tMember\tAdminView list\t✅\t✅\t✅ Create\t❌\t✅\t✅ Edit\t❌\t✅\t✅ Delete\t❌\t✅\t✅  ","version":"Next","tagName":"h3"},{"title":"Snapshots​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#snapshots","content":" Action\tViewer\tMember\tAdminView list\t✅\t✅\t✅ View details\t✅\t✅\t✅ Download\t❌\t✅\t✅ Delete\t❌\t✅\t✅  ","version":"Next","tagName":"h3"},{"title":"Users​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#users","content":" Action\tViewer\tMember\tAdminView list\t✅\t✅\t✅ Invite new user\t❌\t❌\t✅ Edit user role\t❌\t❌\t✅ Delete user\t❌\t❌\t✅ Copy invitation link\t❌\t❌\t✅  ","version":"Next","tagName":"h3"},{"title":"Special Rules​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#special-rules","content":" ","version":"Next","tagName":"h2"},{"title":"User Deletion Restrictions​","type":1,"pageTitle":"Permissions","url":"/databasement/user-guide/permissions#user-deletion-restrictions","content":" Even admins have some restrictions when deleting users:  Cannot delete yourself: An admin cannot delete their own accountCannot delete the last admin: The system must always have at least one admin user ","version":"Next","tagName":"h3"}],"options":{"id":"default"}}